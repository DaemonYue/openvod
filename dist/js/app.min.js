/*! openvod | emma | ISC */
"use strict";!function(){angular.module("openvod",["ui.router","pascalprecht.translate","app.controllers","app.filters","app.directives","app.services","angular-md5"]).config(["$translateProvider",function(a){var b=navigator.language.indexOf("zh")>-1?"zh-CN":"en-US";a.preferredLanguage(b),a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/login"),a.state("login",{url:"/login",templateUrl:"pages/login.html"}).state("app",{url:"/app",templateUrl:"pages/app.html"}).state("app.shop",{url:"/shop",templateUrl:"pages/shop.html"}).state("app.shop.goods",{url:"/goods?shopId",templateUrl:"pages/goods.html"}).state("app.shop.goods.goodsList",{url:"/goodsList?categoryId",templateUrl:"pages/goodsList.html"}).state("app.hotelRoom",{url:"/hotelRoom",templateUrl:"pages/hotelRoom.html"}).state("app.hotelRoom.room",{url:"/room?hotelId",templateUrl:"pages/room.html"})}]).constant("CONFIG",{serverUrl:"http://openvod.cleartv.cn/backend_mgt/v1/",testUrl:"test/",testExtesion:".json",test:!1})}(),function(){angular.module("app.controllers",[]).controller("indexController",["$scope",function(a){var b=this;b.init=function(){this.maskUrl=""}}]).controller("loginController",["$scope","$http","$filter","$state","md5","util",function(a,b,c,d,e,f){var g=this;g.init=function(){},g.login=function(){g.loading=!0;var a=JSON.stringify({action:"GetToken",projectName:g.projectName,username:g.userName,password:e.createHash(g.password)});b({method:"POST",url:f.getApiUrl("logon","","server"),data:a}).then(function(a){var b=a.data;"200"==b.rescode?(f.setParams("userName",g.userName),f.setParams("projectName",g.projectName),f.setParams("token",b.token),g.getEditLangs()):alert(b.rescode+" "+b.errInfo)},function(a){alert(a.status+" 服务器出错")})},g.getEditLangs=function(){b({method:"GET",url:f.getApiUrl("","editLangs","local")}).then(function(a){f.setParams("editLangs",a.data.editLangs),d.go("app")},function(a){})}}]).controller("appController",["$state","util",function(a,b){var c=this;c.init=function(){c.appPhase=1,c.appFramePhase=1,c.maskUrl="",c.maskParams={},console.log(b.getParams("editLangs").length)},c.switchApp=function(b){switch(c.appPhase=2,b){case 0:a.go("app.hotelRoom");break;case 1:a.go("app.shop")}},c.showDesktop=function(){c.appPhase=1,setTimeout(function(){c.appFramePhase=1},530)},c.focusLauncher=function(){c.appFramePhase=2},c.focusApp=function(){c.appFramePhase=1},c.logout=function(a){}}]).controller("shopController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("shopController");var g=this;g.init=function(){g.searchShopList()},g.searchShopList=function(){var a={shopId:1};a=JSON.stringify(a),c({method:e("ajaxMethod")(),url:f.getApiUrl("shopinfo","shopList"),data:a}).then(function(a,b,c,d){console.log(a)},function(a,b,c,d){})},g.shopAdd=function(){a.app.maskParams={test:"12"},a.app.maskUrl="pages/shopAdd.html"}}]).controller("shopAddController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("shopAddController");var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("cancel"),a.app.maskUrl=""}}]).controller("goodsController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("goodsController"),console.log(d);var g=this;g.init=function(){g.shopId=d.shopId},g.goodsAdd=function(){a.app.maskParams={test:"12"},a.app.maskUrl="pages/goodsAdd.html"},g.categoryAdd=function(){a.app.maskParams={test:"12"},a.app.maskUrl="pages/categoryAdd.html"},g.categotyEdit=function(){a.app.maskParams={test:"12"},a.app.maskUrl="pages/categoryEdit.html"},g.shopEdit=function(){console.log("shopEdit"),a.app.maskParams={test:"12"},a.app.maskUrl="pages/shopEdit.html"}}]).controller("goodsAddController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("goodsAddController");var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("cancel"),a.app.maskUrl=""}}]).controller("goodsEditController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("goodsEditController");var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("goodsEditcancel"),a.app.maskUrl=""}}]).controller("shopEditController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("shopEditController");var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("cancel"),a.app.maskUrl=""}}]).controller("categoryAddController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("categoryAddController"),console.log(d);var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("cancel"),a.app.maskUrl=""}}]).controller("categoryEditController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("categoryEditController");var g=this;g.init=function(){console.log(a.app.maskParams.test)},g.cancel=function(){console.log("cancel"),a.app.maskUrl=""}}]).controller("goodsListController",["$scope","$state","$http","$stateParams","$filter","util",function(a,b,c,d,e,f){console.log("goodsListController"),console.log(d);var g=this;g.init=function(){g.shopId=d.categoryId},g.goodsEdit=function(){a.app.maskParams={test:"12"},a.app.maskUrl="pages/goodsEdit.html"}}]).controller("hotelRoomController",["$scope",function(a){var b=this;b.init=function(){b.queryHotelList()},b.queryHotelList=function(){var a=[];a=[{hotelId:1,hotelName:"testhotel1"},{hotelId:2,hotelName:"testhotel2"},{hotelId:3,hotelName:"testhotel3"}],b.hotels=a}}]).controller("roomController",["$scope","$http","$stateParams",function(a,b,c){console.log(c);var d=this;d.init=function(){d.hotelId=c.hotelId,d.queryRoomList()},d.queryRoomList=function(){var a=JSON.stringify({action:"getRoomList",token:util.getParams("token"),lang:d.userName,HotelID:Number(d.hotelId)});b({method:"POST",url:util.getApiUrl("hotelroom","","server"),data:a}).then(function(a){var b=a.data;"200"==b.rescode?(util.setParams("userName",d.userName),util.setParams("projectName",d.projectName),util.setParams("token",b.token),d.getEditLangs()):alert(b.rescode+" "+b.errInfo)},function(a){alert(a.status+" 服务器出错")});var c=[];d.rooms=c}}])}(),function(){angular.module("app.directives",[])}(),function(){angular.module("app.services",[]).factory("util",["CONFIG",function(a){var b={};return{getApiUrl:function(b,c,d){return d?"server"==d?a.serverUrl+b:a.testUrl+c+a.testExtesion:a.test?a.testUrl+c+a.testExtesion:a.serverUrl+b},setParams:function(a,c){b[a]=c},getParams:function(a){return b[a]}}}])}(),function(){angular.module("app.filters",[]).filter("ajaxMethod",["CONFIG",function(a){return function(){var b=a.test?"GET":"POST";return b}}])}();